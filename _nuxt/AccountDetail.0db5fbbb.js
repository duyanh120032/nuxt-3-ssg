import{a as w,O as f,l as g,k as h,G as c,o as v,b as P,e as s,A as m,x as l,z as d}from"./entry.8ffd76b9.js";const b={class:"account-details-form"},y=["onSubmit"],N={class:"row"},D={class:"col-lg-6"},q={class:"single-input-item"},S=s("label",{for:"first-name",class:"required"},"First Name",-1),x={class:"col-lg-6"},U={class:"single-input-item"},C=s("label",{for:"last-name",class:"required"},"Last Name",-1),F={class:"single-input-item"},L=s("label",{for:"display-name",class:"required"},"Display Name",-1),V={class:"single-input-item"},k=s("label",{for:"email",class:"required"},"Email Addres",-1),E=["value"],A=s("div",{class:"single-input-item"},[s("button",{class:"check-btn sqr-btn",type:"submit"},"Save Changes")],-1),B=["onSubmit"],M=s("legend",null,"Password change",-1),T={class:"row"},z={class:"col-lg-6"},G={class:"single-input-item"},O=s("label",{for:"new-pwd",class:"required"},"New Password",-1),j={class:"col-lg-6"},H={class:"single-input-item"},I=s("label",{for:"confirm-pwd",class:"required"},"Confirm Password",-1),J=s("div",{class:"single-input-item"},[s("button",{class:"check-btn sqr-btn",type:"submit"},"Change Password")],-1),R=w({__name:"AccountDetail",setup(K){const n=f(),r=g(),o=h(),a=c({FirstName:"",LastName:"",DisplayName:"",Email:"",error:"",isPending:!1}),t=c({newPassword:"",confirmPassword:"",isPending:!1}),p=async()=>{a.isPending=!0;const{user:u,error:e}=await r.auth.update({data:{firstname:a.FirstName,lastname:a.LastName,displayname:a.DisplayName}});if(e){a.isPending=!1,o.error(e.message),console.log(e);return}o.success("Profile updated successfully"),a.isPending=!1};n.value&&(a.FirstName=n.value.user_metadata.firstname,a.LastName=n.value.user_metadata.lastname,a.DisplayName=n.value.user_metadata.displayname,a.Email=n.value.email);const _=async()=>{if(t.isPending=!0,t.newPassword!==t.confirmPassword){o.error("Passwords do not match"),t.isPending=!1;return}const{user:u,error:e}=await r.auth.update({password:t.newPassword});e&&(t.isPending=!1,o.error(e.message),console.log(e)),t.isPending=!1,o.success("Password updated"),t.newPassword="",t.confirmPassword=""};return(u,e)=>(v(),P("div",null,[s("div",b,[s("form",{class:"mb-5",onSubmit:m(p,["prevent"])},[s("div",N,[s("div",D,[s("div",q,[S,l(s("input",{type:"text",id:"first-name","onUpdate:modelValue":e[0]||(e[0]=i=>a.FirstName=i)},null,512),[[d,a.FirstName]])])]),s("div",x,[s("div",U,[C,l(s("input",{type:"text",id:"last-name","onUpdate:modelValue":e[1]||(e[1]=i=>a.LastName=i)},null,512),[[d,a.LastName]])])])]),s("div",F,[L,l(s("input",{type:"text",id:"display-name","onUpdate:modelValue":e[2]||(e[2]=i=>a.DisplayName=i)},null,512),[[d,a.DisplayName]])]),s("div",V,[k,s("input",{type:"email",id:"email",readonly:"",value:a.Email},null,8,E)]),A],40,y),s("form",{action:"",onSubmit:m(_,["prevent"])},[s("fieldset",null,[M,s("div",T,[s("div",z,[s("div",G,[O,l(s("input",{type:"password",id:"new-pwd","onUpdate:modelValue":e[3]||(e[3]=i=>t.newPassword=i)},null,512),[[d,t.newPassword]])])]),s("div",j,[s("div",H,[I,l(s("input",{type:"password",id:"confirm-pwd","onUpdate:modelValue":e[4]||(e[4]=i=>t.confirmPassword=i)},null,512),[[d,t.confirmPassword]])])])]),J])],40,B)])]))}});export{R as default};
