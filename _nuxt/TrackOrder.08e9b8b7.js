import{a as g,l as y,b as o,e as t,F as k,v,t as n,o as a,E as $,G as m,P as O,h as u,c as S,A as T,x as q,z as D,C as B}from"./entry.8ffd76b9.js";const E={class:"container"},P={class:"table-responsive text-center"},z={class:"table table-bordered"},V=t("thead",{class:"thead-light"},[t("tr",null,[t("th",null,"Title"),t("th",null,"Price"),t("th",null,"Quanity"),t("th",null,"Color"),t("th",null,"Size"),t("th",null,"Image"),t("th",null,"Total")])],-1),I={style:{width:"100px",height:"100px"}},N=["src"],A=t("td",{colspan:"6",class:"text-right"},"Total",-1),F=g({__name:"detail",props:{data:{type:Object,default:()=>({})}},setup(_){return y(),(b,r)=>(a(),o("div",E,[t("div",P,[t("table",z,[V,t("tbody",null,[(a(!0),o(k,null,v(_.data.items,(l,s)=>(a(),o("tr",{key:l.id},[t("td",null,n(l.title),1),t("td",null,"$"+n(l.price),1),t("td",null,n(l.quantity),1),t("td",null,n(l.color),1),t("td",null,n(l.size),1),t("td",I,[t("img",{src:l.image,class:"img-thumbnail"},null,8,N)]),t("td",null,"$"+n(l.price*l.quantity),1)]))),128))]),t("tfoot",null,[t("tr",null,[A,t("td",null,"$"+n(_.data.total),1)])])])])]))}}),M={class:"order-tracking-area pt-110 pb-120"},j={class:"container"},G={key:0,class:"myaccount-table table-responsive text-center"},L={class:"table table-bordered"},Q=t("thead",{class:"thead-light"},[t("tr",null,[t("th",null,"Order"),t("th",null,"Code"),t("th",null,"Date"),t("th",null,"Status"),t("th",null,"Total"),t("th",null,"Action")])],-1),R=["onClick"],U=["onClick"],H={class:"row"},J={class:"row"},K={class:"col-xl-6 col-lg-8 col-md-10 ml-auto mr-auto"},W={class:"order-tracking-content"},X={key:0},Y={class:"order-tracking-form"},Z=["onSubmit"],tt={class:"sin-order-tracking"},et=t("label",null,"Billing Email",-1),lt=t("div",{class:"order-track-btn"},[t("button",{class:"btn",type:"submit"},"Track Now")],-1),nt=g({__name:"TrackOrder",setup(_){const b=$(),{code:r}=b.query||{},l=y(),s=m({email:"",result:null,loading:!1,error:null,code:r||""}),f=async()=>{if(s.email.length===0)return;s.loading=!0,s.error=null;const{data:c}=await l.from("Orders").select("*").eq("user_email",s.email);s.result=c},w=async c=>{await l.from("Orders").delete().eq("id",c)},d=m({order:null,loading:!1,error:null}),p=async c=>{d.loading=!0,d.error=null;const{data:i}=await l.from("Orders").select("*").eq("id",c).single();i.items=await Promise.all(i.items.map(async h=>{const{data:e}=await l.from("Product").select("*").eq("id",h.id).single();if(e.title)return{...h,title:e.title,image:e.image,price:e.price}})),d.order=i};return O(async()=>{r&&typeof r=="string"&&(s.code=r,console.log(s.code),await p(r))}),(c,i)=>{const h=F;return a(),o("div",null,[t("div",M,[t("div",j,[s.result?(a(),o("div",G,[t("table",L,[Q,t("tbody",null,[(a(!0),o(k,null,v(s.result,(e,C)=>(a(),o("tr",{key:e.id},[t("td",null,n(C+1),1),t("td",null,n(e.id),1),t("td",null,n(new Date(e.created_at).toISOString()),1),t("td",null,[t("p",{class:B(`${e.status==="Pending"?"text-primary":e.status==="Cancelled"?"text-danger":"text-secondary"}`)},n(e.status),3)]),t("td",null,"$"+n(e.total),1),t("td",null,[e.status!=="Cancelled"?(a(),o("button",{key:0,class:"check-btn sqr-btn btn btn-warning mr-3",onClick:x=>w(e.id)},"Cancel",8,R)):u("",!0),e.status!=="Cancelled"?(a(),o("button",{key:1,class:"check-btn sqr-btn btn btn-success",onClick:x=>p(e.id)},"View Detail",8,U)):u("",!0)])]))),128))])])])):u("",!0),t("div",H,[d.order?(a(),S(h,{key:0,data:d.order},null,8,["data"])):u("",!0)]),t("div",J,[t("div",K,[t("div",W,[s.result?u("",!0):(a(),o("p",X,'To track your order please enter your Order ID in the box below and press the "Track" button. This was given to you on your receipt and in the confirmation email you should have received.')),t("div",Y,[t("form",{action:"#",onSubmit:T(f,["prevent"])},[t("div",tt,[et,q(t("input",{type:"email",placeholder:"Email you used during checkout",autocomplete:"email","onUpdate:modelValue":i[0]||(i[0]=e=>s.email=e)},null,512),[[D,s.email]])]),lt],40,Z)])])])])])])])}}});export{nt as default};
